
    var points = [{"llg":{"lat":41.38805843174895,"lng":2.155348062515259},"sns":2,"ang":135},
{"llg":{"lat":41.39109556200192,"lng":2.1558849513257883},"sns":2,"ang":135},
{"llg":{"lat":41.3912358142053,"lng":2.155640423297882},"sns":0,"ang":135},
{"llg":{"lat":41.391420938731265,"lng":2.155393660068512},"sns":1,"ang":135},
{"llg":{"lat":41.39167447798749,"lng":2.155071794986725},"sns":2,"ang":135},
{"llg":{"lat":41.39185356464402,"lng":2.1548116207122803},"sns":1,"ang":135},
{"llg":{"lat":41.39206685822042,"lng":2.154540717601776},"sns":1,"ang":135},
{"llg":{"lat":41.39226002915741,"lng":2.154279202222824},"sns":1,"ang":135},
{"llg":{"lat":41.392396858223826,"lng":2.1541249752044678},"sns":0,"ang":135},
{"llg":{"lat":41.39233649249474,"lng":2.1540123224258423},"sns":0,"ang":135},
{"llg":{"lat":41.392203687693424,"lng":2.1542000770568848},"sns":0,"ang":135},
{"llg":{"lat":41.39207490702092,"lng":2.154393196105957},"sns":0,"ang":135},
{"llg":{"lat":41.39190185759052,"lng":2.154591679573059},"sns":0,"ang":135},
{"llg":{"lat":41.39170868558923,"lng":2.1548491716384888},"sns":0,"ang":135},
{"llg":{"lat":41.3913746576492,"lng":2.1552783250808716},"sns":0,"ang":135},
{"llg":{"lat":41.391221728621964,"lng":2.155471444129944},"sns":0,"ang":135},
{"llg":{"lat":41.391008432272656,"lng":2.155766487121582},"sns":2,"ang":135},
{"llg":{"lat":41.39054159253779,"lng":2.1563565731048584},"sns":0,"ang":135},
{"llg":{"lat":41.39026792630705,"lng":2.1567267179489136},"sns":0,"ang":135},
{"llg":{"lat":41.39010292111123,"lng":2.1569573879241943},"sns":2,"ang":135},
{"llg":{"lat":41.390899771599216,"lng":2.1582019329071045},"sns":1,"ang":135},
{"llg":{"lat":41.39114526397344,"lng":2.1578586101531982},"sns":1,"ang":135},
{"llg":{"lat":41.39139075542061,"lng":2.1575474739074707},"sns":1,"ang":135},
{"llg":{"lat":41.39170063674338,"lng":2.157112956047058},"sns":0,"ang":135},
{"llg":{"lat":41.39183344257237,"lng":2.156962752342224},"sns":1,"ang":135},
{"llg":{"lat":41.39196624813007,"lng":2.156791090965271},"sns":1,"ang":135},
{"llg":{"lat":41.39212319980302,"lng":2.1565765142440796},"sns":2,"ang":135},
{"llg":{"lat":41.39228417548417,"lng":2.1563565731048584},"sns":0,"ang":135},
{"llg":{"lat":41.392493443273764,"lng":2.15606153011322},"sns":1,"ang":135},
{"llg":{"lat":41.39269466166691,"lng":2.1558040380477905},"sns":0,"ang":135},
{"llg":{"lat":41.39282344111165,"lng":2.155637741088867},"sns":2,"ang":135},
{"llg":{"lat":41.39295222030126,"lng":2.155466079711914},"sns":2,"ang":135},
{"llg":{"lat":41.39310514525762,"lng":2.1552622318267822},"sns":2,"ang":135},
{"llg":{"lat":41.39319770492482,"lng":2.1551066637039185},"sns":0,"ang":135},
{"llg":{"lat":41.39242502887821,"lng":2.156361937522888},"sns":1,"ang":135},
{"llg":{"lat":41.39230027303037,"lng":2.1565496921539307},"sns":1,"ang":135},
{"llg":{"lat":41.392135272992924,"lng":2.156742811203003},"sns":2,"ang":135},
{"llg":{"lat":41.39202661420296,"lng":2.1569037437438965},"sns":1,"ang":135},
{"llg":{"lat":41.391869662296834,"lng":2.1570754051208496},"sns":1,"ang":135},
{"llg":{"lat":41.39170868558923,"lng":2.1573060750961304},"sns":1,"ang":135},
{"llg":{"lat":41.39151148857914,"lng":2.1575796604156494},"sns":2,"ang":135},
{"llg":{"lat":41.39133843764895,"lng":2.1577727794647217},"sns":2,"ang":135},
{"llg":{"lat":41.39120160635475,"lng":2.1579980850219727},"sns":1,"ang":135},
{"llg":{"lat":41.391016481204204,"lng":2.1582072973251343},"sns":0,"ang":135},
{"llg":{"lat":41.39064220483303,"lng":2.158690094947815},"sns":0,"ang":135},
{"llg":{"lat":41.39044902908868,"lng":2.158936858177185},"sns":0,"ang":135},
{"llg":{"lat":41.39026390179505,"lng":2.1591997146606445},"sns":2,"ang":135},
{"llg":{"lat":41.390034504199875,"lng":2.159457206726074},"sns":2,"ang":135},
{"llg":{"lat":41.38830393485242,"lng":2.157241702079773},"sns":1,"ang":135},
{"llg":{"lat":41.388493092349,"lng":2.1570056676864624},"sns":1,"ang":135},
{"llg":{"lat":41.38870639695093,"lng":2.1567535400390625},"sns":2,"ang":135},
{"llg":{"lat":41.38896799597898,"lng":2.1563780307769775},"sns":2,"ang":135},
{"llg":{"lat":41.38916922528428,"lng":2.1559113264083862},"sns":1,"ang":135},
{"llg":{"lat":41.38955960836037,"lng":2.155396342277527},"sns":2,"ang":135},
{"llg":{"lat":41.39000230798141,"lng":2.154763340950012},"sns":2,"ang":135},
{"llg":{"lat":41.39063415585513,"lng":2.1539855003356934},"sns":2,"ang":135},
{"llg":{"lat":41.389978160807075,"lng":2.1551066637039185},"sns":0,"ang":45},
{"llg":{"lat":41.390090847543874,"lng":2.1552783250808716},"sns":1,"ang":45},
{"llg":{"lat":41.39021158311655,"lng":2.155466079711914},"sns":2,"ang":45},
{"llg":{"lat":41.39039671055913,"lng":2.155696749687195},"sns":1,"ang":45},
{"llg":{"lat":41.39056573950284,"lng":2.1559596061706543},"sns":0,"ang":45},
{"llg":{"lat":41.390883673706234,"lng":2.1563243865966797},"sns":1,"ang":45},
{"llg":{"lat":41.391229777527094,"lng":2.156742811203003},"sns":1,"ang":45},
{"llg":{"lat":41.391531610750434,"lng":2.157166600227356},"sns":0,"ang":45},
{"llg":{"lat":41.39177307632011,"lng":2.1574723720550537},"sns":0,"ang":45},
{"llg":{"lat":41.39195417490876,"lng":2.1577459573745728},"sns":0,"ang":45},
{"llg":{"lat":41.392119175405895,"lng":2.1579766273498535},"sns":2,"ang":45},
{"llg":{"lat":41.39233649249474,"lng":2.1582716703414917},"sns":1,"ang":45},
{"llg":{"lat":41.39226405354583,"lng":2.1584218740463257},"sns":2,"ang":45},
{"llg":{"lat":41.392046736214816,"lng":2.1581053733825684},"sns":0,"ang":45},
{"llg":{"lat":41.3918495402302,"lng":2.1577996015548706},"sns":2,"ang":45},
{"llg":{"lat":41.391612099373305,"lng":2.157509922981262},"sns":1,"ang":45},
{"llg":{"lat":41.39141490207026,"lng":2.1572041511535645},"sns":1,"ang":45},
{"llg":{"lat":41.391221728621964,"lng":2.156935930252075},"sns":2,"ang":45},
{"llg":{"lat":41.39097221206834,"lng":2.1566516160964966},"sns":1,"ang":45},
{"llg":{"lat":41.390762939381744,"lng":2.1563512086868286},"sns":2,"ang":45},
{"llg":{"lat":41.390549641527144,"lng":2.1560829877853394},"sns":0,"ang":45},
{"llg":{"lat":41.39041683307547,"lng":2.155922055244446},"sns":0,"ang":45},
{"llg":{"lat":41.390296097883976,"lng":2.155739665031433},"sns":1,"ang":45},
{"llg":{"lat":41.39017133795056,"lng":2.15556263923645},"sns":1,"ang":45},
{"llg":{"lat":41.39004255325203,"lng":2.1554017066955566},"sns":1,"ang":45},
{"llg":{"lat":41.38989767016122,"lng":2.1552032232284546},"sns":2,"ang":45},
{"llg":{"lat":41.39074684145487,"lng":2.1540606021881104},"sns":1,"ang":45},
{"llg":{"lat":41.39091184501634,"lng":2.1543341875076294},"sns":1,"ang":45},
{"llg":{"lat":41.39106075030989,"lng":2.1545273065567017},"sns":1,"ang":45},
{"llg":{"lat":41.391249899785585,"lng":2.1548116207122803},"sns":0,"ang":45},
{"llg":{"lat":41.391443073150164,"lng":2.15506911277771},"sns":0,"ang":45},
{"llg":{"lat":41.39165234364737,"lng":2.1553534269332886},"sns":2,"ang":45},
{"llg":{"lat":41.39188173553385,"lng":2.1556484699249268},"sns":1,"ang":45},
{"llg":{"lat":41.39212319980302,"lng":2.1559274196624756},"sns":2,"ang":45},
{"llg":{"lat":41.39234856564502,"lng":2.1562010049819946},"sns":2,"ang":45},
{"llg":{"lat":41.39252161388631,"lng":2.156469225883484},"sns":1,"ang":45},
{"llg":{"lat":41.39271880783222,"lng":2.156742811203003},"sns":1,"ang":45},
{"llg":{"lat":41.39298441505881,"lng":2.1570968627929688},"sns":2,"ang":45},
{"llg":{"lat":41.393165510272915,"lng":2.1573328971862793},"sns":0,"ang":45},
{"llg":{"lat":41.393274167159205,"lng":2.1571987867355347},"sns":2,"ang":45},
{"llg":{"lat":41.392980390715,"lng":2.156839370727539},"sns":1,"ang":45},
{"llg":{"lat":41.392618198750895,"lng":2.1563726663589478},"sns":1,"ang":45},
{"llg":{"lat":41.392376736320344,"lng":2.1560561656951904},"sns":2,"ang":45},
{"llg":{"lat":41.39212319980302,"lng":2.1557343006134033},"sns":1,"ang":45},
{"llg":{"lat":41.3918978331797,"lng":2.1554285287857056},"sns":1,"ang":45},
{"llg":{"lat":41.39166844135003,"lng":2.155138850212097},"sns":1,"ang":45},
{"llg":{"lat":41.39152356188266,"lng":2.1549350023269653},"sns":2,"ang":45},
{"llg":{"lat":41.3913424620944,"lng":2.154688239097595},"sns":1,"ang":45},
{"llg":{"lat":41.39112916614122,"lng":2.154371738433838},"sns":2,"ang":45},
{"llg":{"lat":41.39089574712634,"lng":2.154039144515991},"sns":2,"ang":45},
{"llg":{"lat":41.39163222151346,"lng":2.1529769897460938},"sns":2,"ang":45},
{"llg":{"lat":41.39181734491058,"lng":2.153245210647583},"sns":2,"ang":45},
{"llg":{"lat":41.39214332178496,"lng":2.153620719909668},"sns":2,"ang":45},
{"llg":{"lat":41.392328443726626,"lng":2.1538835763931274},"sns":2,"ang":45},
{"llg":{"lat":41.39261015001764,"lng":2.1542751789093018},"sns":0,"ang":45},
{"llg":{"lat":41.392883806388575,"lng":2.1546828746795654},"sns":2,"ang":45},
{"llg":{"lat":41.393149412940986,"lng":2.1550315618515015},"sns":0,"ang":45},
{"llg":{"lat":41.39345123725142,"lng":2.1553802490234375},"sns":2,"ang":45},
{"llg":{"lat":41.39377720593262,"lng":2.1558791399002075},"sns":2,"ang":45},
{"llg":{"lat":41.3940347602778,"lng":2.1561795473098755},"sns":0,"ang":45},
{"llg":{"lat":41.394050857390496,"lng":2.155943512916565},"sns":2,"ang":45},
{"llg":{"lat":41.39380135169583,"lng":2.1556001901626587},"sns":2,"ang":45},
{"llg":{"lat":41.39360013672834,"lng":2.155396342277527},"sns":1,"ang":45},
{"llg":{"lat":41.39341904272505,"lng":2.155144214630127},"sns":2,"ang":45},
{"llg":{"lat":41.39323794821728,"lng":2.154892086982727},"sns":0,"ang":45},
{"llg":{"lat":41.393093072247815,"lng":2.1546775102615356},"sns":1,"ang":45},
{"llg":{"lat":41.39294417160941,"lng":2.1545326709747314},"sns":2,"ang":45},
{"llg":{"lat":41.39281136804955,"lng":2.1543127298355103},"sns":2,"ang":45},
{"llg":{"lat":41.39265441803812,"lng":2.1541303396224976},"sns":2,"ang":45},
{"llg":{"lat":41.39243307763436,"lng":2.1538567543029785},"sns":2,"ang":45},
{"llg":{"lat":41.39228417548417,"lng":2.1536636352539062},"sns":0,"ang":45},
{"llg":{"lat":41.39219563890885,"lng":2.1535348892211914},"sns":2,"ang":45},
{"llg":{"lat":41.392042711812955,"lng":2.153341770172119},"sns":2,"ang":45},
{"llg":{"lat":41.391865637884,"lng":2.153116464614868},"sns":1,"ang":45},
{"llg":{"lat":41.39168856347274,"lng":2.1528589725494385},"sns":2,"ang":45},
{"llg":{"lat":41.3915034397089,"lng":2.1526390314102173},"sns":2,"ang":45},
{"llg":{"lat":41.39141490207026,"lng":2.152521014213562},"sns":0,"ang":45},
{"llg":{"lat":41.391221728621964,"lng":2.152268886566162},"sns":0,"ang":45},
{"llg":{"lat":41.39106879923496,"lng":2.152022123336792},"sns":2,"ang":45},
{"llg":{"lat":41.39087562475823,"lng":2.15181827545166},"sns":2,"ang":45},
{"llg":{"lat":41.39170063674338,"lng":2.1508097648620605},"sns":0,"ang":45},
{"llg":{"lat":41.391869662296834,"lng":2.151051163673401},"sns":2,"ang":45},
{"llg":{"lat":41.39209905341645,"lng":2.1514159440994263},"sns":1,"ang":45},
{"llg":{"lat":41.39233649249474,"lng":2.1516573429107666},"sns":2,"ang":45},
{"llg":{"lat":41.39261015001764,"lng":2.1519899368286133},"sns":1,"ang":45},
{"llg":{"lat":41.392887830738346,"lng":2.1523600816726685},"sns":1,"ang":45},
{"llg":{"lat":41.39313331560506,"lng":2.152698040008545},"sns":1,"ang":45},
{"llg":{"lat":41.38917928673319,"lng":2.156270742416382},"sns":1,"ang":45},
{"llg":{"lat":41.3892819134232,"lng":2.1564316749572754},"sns":1,"ang":45},
{"llg":{"lat":41.38942679788622,"lng":2.156640887260437},"sns":0,"ang":45},
{"llg":{"lat":41.38956363291596,"lng":2.156839370727539},"sns":2,"ang":45},
{"llg":{"lat":41.38973266402565,"lng":2.157043218612671},"sns":0,"ang":45},
{"llg":{"lat":41.389871510679846,"lng":2.157214879989624},"sns":0,"ang":45},
{"llg":{"lat":41.38976888492056,"lng":2.157287299633026},"sns":1,"ang":45},
{"llg":{"lat":41.389692418563214,"lng":2.1571719646453857},"sns":1,"ang":45},
{"llg":{"lat":41.38955357152653,"lng":2.1569734811782837},"sns":2,"ang":45},
{"llg":{"lat":41.38944490842142,"lng":2.1568500995635986},"sns":0,"ang":45},
{"llg":{"lat":41.389318134569216,"lng":2.156667709350586},"sns":1,"ang":45},
{"llg":{"lat":41.38921953251328,"lng":2.156514823436737},"sns":1,"ang":45},
{"llg":{"lat":41.389052512363044,"lng":2.15631365776062},"sns":1,"ang":45},
{"llg":{"lat":41.38990169469587,"lng":2.1574562788009644},"sns":1,"ang":45},
{"llg":{"lat":41.390062675877985,"lng":2.1576467156410217},"sns":0,"ang":45},
{"llg":{"lat":41.3902317056902,"lng":2.1578961610794067},"sns":0,"ang":45},
{"llg":{"lat":41.390400735062904,"lng":2.1581026911735535},"sns":1,"ang":45},
{"llg":{"lat":41.390519457811955,"lng":2.1582475304603577},"sns":0,"ang":45},
{"llg":{"lat":41.39065226605396,"lng":2.1584326028823853},"sns":0,"ang":45},
{"llg":{"lat":41.39070055989288,"lng":2.1582797169685364},"sns":1,"ang":45},
{"llg":{"lat":41.39061000891547,"lng":2.1581456065177917},"sns":2,"ang":45},
{"llg":{"lat":41.390436955585606,"lng":2.1579310297966003},"sns":0,"ang":45},
{"llg":{"lat":41.39029006111853,"lng":2.157719135284424},"sns":1,"ang":45},
{"llg":{"lat":41.390106945633164,"lng":2.1575045585632324},"sns":0,"ang":45},
{"llg":{"lat":41.38999627118865,"lng":2.1573731303215027},"sns":1,"ang":45},
{"llg":{"lat":41.39087964923237,"lng":2.1584969758987427},"sns":0,"ang":45},
{"llg":{"lat":41.391018493436924,"lng":2.1586874127388},"sns":1,"ang":45},
{"llg":{"lat":41.39117947185364,"lng":2.1589261293411255},"sns":1,"ang":45},
{"llg":{"lat":41.39131831541786,"lng":2.1591567993164062},"sns":1,"ang":45},
{"llg":{"lat":41.39152356188266,"lng":2.1594035625457764},"sns":2,"ang":45},
{"llg":{"lat":41.39146923199915,"lng":2.1595457196235657},"sns":2,"ang":45},
{"llg":{"lat":41.391350510984594,"lng":2.1593686938285828},"sns":2,"ang":45},
{"llg":{"lat":41.39125593646193,"lng":2.1592211723327637},"sns":1,"ang":45},
{"llg":{"lat":41.391161361801636,"lng":2.1591272950172424},"sns":2,"ang":45},
{"llg":{"lat":41.3910929460042,"lng":2.1590039134025574},"sns":2,"ang":45},
{"llg":{"lat":41.39096416313133,"lng":2.1588456630706787},"sns":1,"ang":45},
{"llg":{"lat":41.390815257616545,"lng":2.158663272857666},"sns":1,"ang":45},
{"llg":{"lat":41.390684461950556,"lng":2.1537601947784424},"sns":1,"ang":45},
{"llg":{"lat":41.39060799667012,"lng":2.153666317462921},"sns":2,"ang":45},
{"llg":{"lat":41.39052348230811,"lng":2.1535536646842957},"sns":2,"ang":45},
{"llg":{"lat":41.39042689433131,"lng":2.15344101190567},"sns":0,"ang":45},
{"llg":{"lat":41.39032426944874,"lng":2.153296172618866},"sns":0,"ang":45},
{"llg":{"lat":41.39017737472703,"lng":2.1531030535697937},"sns":2,"ang":45},
{"llg":{"lat":41.3900465777777,"lng":2.153148651123047},"sns":2,"ang":45},
{"llg":{"lat":41.390169325691595,"lng":2.153290808200836},"sns":1,"ang":45},
{"llg":{"lat":41.39025987728283,"lng":2.153419554233551},"sns":2,"ang":45},
{"llg":{"lat":41.39035847776093,"lng":2.153548300266266},"sns":1,"ang":45},
{"llg":{"lat":41.39047518833766,"lng":2.1537065505981445},"sns":2,"ang":45},
{"llg":{"lat":41.39057177624271,"lng":2.1538272500038147},"sns":1,"ang":45},
{"llg":{"lat":41.38982522849473,"lng":2.154892086982727},"sns":1,"ang":45},
{"llg":{"lat":41.38975077447563,"lng":2.154790163040161},"sns":0,"ang":45},
{"llg":{"lat":41.389666258999256,"lng":2.1547016501426697},"sns":2,"ang":45},
{"llg":{"lat":41.389525399627814,"lng":2.154495120048523},"sns":2,"ang":45},
{"llg":{"lat":41.38942881016816,"lng":2.154398560523987},"sns":1,"ang":45},
{"llg":{"lat":41.389342281988704,"lng":2.1542590856552124},"sns":2,"ang":45},
{"llg":{"lat":41.38921752022486,"lng":2.154092788696289},"sns":1,"ang":45},
{"llg":{"lat":41.38909678280612,"lng":2.154141068458557},"sns":2,"ang":45},
{"llg":{"lat":41.389207458781875,"lng":2.1543020009994507},"sns":2,"ang":45},
{"llg":{"lat":41.389314109998445,"lng":2.1544575691223145},"sns":2,"ang":45},
{"llg":{"lat":41.38944289613996,"lng":2.1546131372451782},"sns":2,"ang":45},
{"llg":{"lat":41.38957369430383,"lng":2.1547767519950867},"sns":1,"ang":45},
{"llg":{"lat":41.3896883940156,"lng":2.1549108624458313},"sns":1,"ang":45},
{"llg":{"lat":41.388917688555324,"lng":2.1561554074287415},"sns":0,"ang":45},
{"llg":{"lat":41.38883115969558,"lng":2.156042754650116},"sns":1,"ang":45},
{"llg":{"lat":41.388728532294046,"lng":2.155892550945282},"sns":0,"ang":45},
{"llg":{"lat":41.38860578165986,"lng":2.155736982822418},"sns":2,"ang":45},
{"llg":{"lat":41.38852126469502,"lng":2.155594825744629},"sns":2,"ang":45},
{"llg":{"lat":41.388418636804325,"lng":2.1554768085479736},"sns":0,"ang":45},
{"llg":{"lat":41.388289848633846,"lng":2.1553051471710205},"sns":2,"ang":45},
{"llg":{"lat":41.388297897901964,"lng":2.1551066637039185},"sns":0,"ang":45},
{"llg":{"lat":41.38847296923723,"lng":2.155337333679199},"sns":0,"ang":45},
{"llg":{"lat":41.3886218801169,"lng":2.155565321445465},"sns":1,"ang":45},
{"llg":{"lat":41.38877883986406,"lng":2.1558013558387756},"sns":2,"ang":45},
{"llg":{"lat":41.3889036024697,"lng":2.15594083070755},"sns":2,"ang":45},
{"llg":{"lat":41.38900019270966,"lng":2.156069576740265},"sns":1,"ang":45},
{"llg":{"lat":41.38743058352986,"lng":2.1562546491622925},"sns":0,"ang":45},
{"llg":{"lat":41.3875472993627,"lng":2.156420946121216},"sns":1,"ang":45},
{"llg":{"lat":41.38766803965896,"lng":2.156563103199005},"sns":0,"ang":45},
{"llg":{"lat":41.38780689072245,"lng":2.1567991375923157},"sns":1,"ang":45},
{"llg":{"lat":41.38794372916158,"lng":2.1569788455963135},"sns":0,"ang":45},
{"llg":{"lat":41.38809867822288,"lng":2.157139778137207},"sns":0,"ang":45},
{"llg":{"lat":41.38805038245118,"lng":2.157268524169922},"sns":0,"ang":45},
{"llg":{"lat":41.387929642864954,"lng":2.1571022272109985},"sns":2,"ang":45},
{"llg":{"lat":41.387796829061145,"lng":2.1569520235061646},"sns":0,"ang":45},
{"llg":{"lat":41.38767206433163,"lng":2.1567481756210327},"sns":1,"ang":45},
{"llg":{"lat":41.38753321298021,"lng":2.156544327735901},"sns":0,"ang":45},
{"llg":{"lat":41.38737222553487,"lng":2.1563485264778137},"sns":2,"ang":45},
{"llg":{"lat":41.393413006249595,"lng":2.1530574560165405},"sns":2,"ang":45},
{"llg":{"lat":41.393584039504034,"lng":2.1533042192459106},"sns":1,"ang":45},
{"llg":{"lat":41.39368062279008,"lng":2.1534276008605957},"sns":2,"ang":45},
{"llg":{"lat":41.39380537598881,"lng":2.153620719909668},"sns":2,"ang":45},
{"llg":{"lat":41.39395628679635,"lng":2.1538138389587402},"sns":2,"ang":45},
{"llg":{"lat":41.39409713656728,"lng":2.153789699077606},"sns":2,"ang":45},
{"llg":{"lat":41.39392208037735,"lng":2.153569757938385},"sns":0,"ang":45},
{"llg":{"lat":41.39382147315831,"lng":2.1534141898155212},"sns":1,"ang":45},
{"llg":{"lat":41.3936906835408,"lng":2.1532264351844788},"sns":1,"ang":45},
{"llg":{"lat":41.39357196658318,"lng":2.1530681848526},"sns":2,"ang":45},
{"llg":{"lat":41.39345123725142,"lng":2.1528884768486023},"sns":1,"ang":45},
{"llg":{"lat":41.39427018015375,"lng":2.153993546962738},"sns":0,"ang":45},
{"llg":{"lat":41.394485477926345,"lng":2.154269814491272},"sns":2,"ang":45},
{"llg":{"lat":41.39460620533729,"lng":2.154495120048523},"sns":2,"ang":45},
{"llg":{"lat":41.394741017347805,"lng":2.1546855568885803},"sns":2,"ang":45},
{"llg":{"lat":41.3948557079426,"lng":2.154846489429474},"sns":2,"ang":45},
{"llg":{"lat":41.394877841192,"lng":2.155012786388397},"sns":0,"ang":45},
{"llg":{"lat":41.39473095675965,"lng":2.1548786759376526},"sns":2,"ang":45},
{"llg":{"lat":41.3946041932156,"lng":2.1547257900238037},"sns":2,"ang":45},
{"llg":{"lat":41.3945156598001,"lng":2.1545299887657166},"sns":0,"ang":45},
{"llg":{"lat":41.394358713903586,"lng":2.154342234134674},"sns":2,"ang":45},
{"llg":{"lat":41.394254083095376,"lng":2.1542081236839294},"sns":1,"ang":45},
{"llg":{"lat":41.394179634148514,"lng":2.154090106487274},"sns":2,"ang":45},
{"llg":{"lat":41.38822746677205,"lng":2.1571290493011475},"sns":0,"ang":135},
{"llg":{"lat":41.38839247672784,"lng":2.1569305658340454},"sns":2,"ang":135},
{"llg":{"lat":41.388581633966815,"lng":2.1567052602767944},"sns":1,"ang":135},
{"llg":{"lat":41.388730544597614,"lng":2.1565067768096924},"sns":1,"ang":135},
{"llg":{"lat":41.388863356494056,"lng":2.1563082933425903},"sns":0,"ang":135},
{"llg":{"lat":41.387949766144914,"lng":2.1554982662200928},"sns":2,"ang":135},
{"llg":{"lat":41.3878169523822,"lng":2.1556860208511353},"sns":1,"ang":135},
{"llg":{"lat":41.38767206433163,"lng":2.1559005975723267},"sns":1,"ang":135},
{"llg":{"lat":41.38752315127654,"lng":2.156088352203369},"sns":2,"ang":135},
{"llg":{"lat":41.38743863290437,"lng":2.1560078859329224},"sns":1,"ang":135},
{"llg":{"lat":41.38765596563941,"lng":2.155718207359314},"sns":1,"ang":135},
{"llg":{"lat":41.38782097704566,"lng":2.1554607152938843},"sns":1,"ang":135},
{"llg":{"lat":41.38805038245118,"lng":2.1551817655563354},"sns":2,"ang":135},
{"llg":{"lat":41.38824758995983,"lng":2.154870629310608},"sns":1,"ang":135},
{"llg":{"lat":41.38843674762033,"lng":2.154672145843506},"sns":2,"ang":135},
{"llg":{"lat":41.38859370781446,"lng":2.154441475868225},"sns":2,"ang":135},
{"llg":{"lat":41.388794938278245,"lng":2.1542268991470337},"sns":0,"ang":135},
{"llg":{"lat":41.388927750043166,"lng":2.1540552377700806},"sns":0,"ang":135},
{"llg":{"lat":41.388927750043166,"lng":2.1543073654174805},"sns":1,"ang":135},
{"llg":{"lat":41.388798962881175,"lng":2.1544629335403442},"sns":0,"ang":135},
{"llg":{"lat":41.388581633966815,"lng":2.154720425605774},"sns":0,"ang":135},
{"llg":{"lat":41.38835625506612,"lng":2.1549618244171143},"sns":2,"ang":135},
{"llg":{"lat":41.38926179055557,"lng":2.1539855003356934},"sns":0,"ang":135},
{"llg":{"lat":41.3894348470136,"lng":2.1538567543029785},"sns":1,"ang":135},
{"llg":{"lat":41.38966022217531,"lng":2.1536368131637573},"sns":1,"ang":135},
{"llg":{"lat":41.38988962109115,"lng":2.1533310413360596},"sns":1,"ang":135},
{"llg":{"lat":41.389829253033874,"lng":2.153170108795166},"sns":2,"ang":135},
{"llg":{"lat":41.389656197625705,"lng":2.1533793210983276},"sns":0,"ang":135},
{"llg":{"lat":41.389479117196316,"lng":2.1535831689834595},"sns":2,"ang":135},
{"llg":{"lat":41.389253741406776,"lng":2.1537762880325317},"sns":2,"ang":135},
{"llg":{"lat":41.3900827984977,"lng":2.15282142162323},"sns":1,"ang":135},
{"llg":{"lat":41.39025182825761,"lng":2.152542471885681},"sns":0,"ang":135},
{"llg":{"lat":41.39044098008689,"lng":2.1522796154022217},"sns":2,"ang":135},
{"llg":{"lat":41.39063818034419,"lng":2.1519362926483154},"sns":2,"ang":135},
{"llg":{"lat":41.39070659662021,"lng":2.152166962623596},"sns":1,"ang":135},
{"llg":{"lat":41.390545617032615,"lng":2.152424454689026},"sns":2,"ang":135},
{"llg":{"lat":41.3903725635313,"lng":2.152622938156128},"sns":2,"ang":135},
{"llg":{"lat":41.39020755860105,"lng":2.152891159057617},"sns":1,"ang":135},
{"llg":{"lat":41.390883673706234,"lng":2.1516573429107666},"sns":2,"ang":135},
{"llg":{"lat":41.39103660352872,"lng":2.1514856815338135},"sns":2,"ang":135},
{"llg":{"lat":41.391161361801636,"lng":2.151244282722473},"sns":2,"ang":135},
{"llg":{"lat":41.39137063320571,"lng":2.1509921550750732},"sns":1,"ang":135},
{"llg":{"lat":41.39152356188266,"lng":2.1508097648620605},"sns":0,"ang":135},
{"llg":{"lat":41.391443073150164,"lng":2.150675654411316},"sns":0,"ang":135},
{"llg":{"lat":41.39131831541786,"lng":2.15082049369812},"sns":2,"ang":135},
{"llg":{"lat":41.39114526397344,"lng":2.1510565280914307},"sns":2,"ang":135},
{"llg":{"lat":41.39096416313133,"lng":2.15132474899292},"sns":2,"ang":135},
{"llg":{"lat":41.390815257616545,"lng":2.1514803171157837},"sns":2,"ang":135},
{"llg":{"lat":41.39144709758915,"lng":2.1529126167297363},"sns":0,"ang":135},
{"llg":{"lat":41.391322339864566,"lng":2.153095006942749},"sns":0,"ang":135},
{"llg":{"lat":41.391209655262365,"lng":2.1532130241394043},"sns":0,"ang":135},
{"llg":{"lat":41.391084897082116,"lng":2.1534007787704468},"sns":1,"ang":135},
{"llg":{"lat":41.39092794290237,"lng":2.1535831689834595},"sns":1,"ang":135},
{"llg":{"lat":41.390827331049366,"lng":2.1537280082702637},"sns":1,"ang":135},
{"llg":{"lat":41.390883673706234,"lng":2.1539050340652466},"sns":1,"ang":135},
{"llg":{"lat":41.39103660352872,"lng":2.153674364089966},"sns":1,"ang":135},
{"llg":{"lat":41.39123380197929,"lng":2.1534758806228638},"sns":1,"ang":135},
{"llg":{"lat":41.391362584318,"lng":2.153245210647583},"sns":1,"ang":135},
{"llg":{"lat":41.39150746414415,"lng":2.1530145406723022},"sns":1,"ang":135},
{"llg":{"lat":41.39171271001178,"lng":2.152719497680664},"sns":2,"ang":135},
{"llg":{"lat":41.39189380876859,"lng":2.15257465839386},"sns":2,"ang":135},
{"llg":{"lat":41.39203466300845,"lng":2.152343988418579},"sns":1,"ang":135},
{"llg":{"lat":41.39217149254923,"lng":2.1521347761154175},"sns":1,"ang":135},
{"llg":{"lat":41.39235661441067,"lng":2.1519309282302856},"sns":2,"ang":135},
{"llg":{"lat":41.39228015109702,"lng":2.1517914533615112},"sns":2,"ang":135},
{"llg":{"lat":41.39210710221298,"lng":2.1519792079925537},"sns":2,"ang":135},
{"llg":{"lat":41.39195819931613,"lng":2.152242064476013},"sns":0,"ang":135},
{"llg":{"lat":41.391797222827755,"lng":2.1524405479431152},"sns":2,"ang":135},
{"llg":{"lat":41.391644294794546,"lng":2.152601480484009},"sns":2,"ang":135},
{"llg":{"lat":41.39318160760086,"lng":2.152891159057617},"sns":2,"ang":135},
{"llg":{"lat":41.39305685320501,"lng":2.1530896425247192},"sns":1,"ang":135},
{"llg":{"lat":41.39286368463581,"lng":2.153293490409851},"sns":2,"ang":135},
{"llg":{"lat":41.392690637305144,"lng":2.153545618057251},"sns":2,"ang":135},
{"llg":{"lat":41.39252161388631,"lng":2.153749465942383},"sns":1,"ang":135},
{"llg":{"lat":41.39261015001764,"lng":2.1539318561553955},"sns":2,"ang":135},
{"llg":{"lat":41.392771124493,"lng":2.153647541999817},"sns":2,"ang":135},
{"llg":{"lat":41.39295624464685,"lng":2.1534276008605957},"sns":2,"ang":135},
{"llg":{"lat":41.39308904791072,"lng":2.1532773971557617},"sns":2,"ang":135},
{"llg":{"lat":41.393270142833316,"lng":2.1530574560165405},"sns":2,"ang":135},
{"llg":{"lat":41.39398244463403,"lng":2.154023051261902},"sns":2,"ang":135},
{"llg":{"lat":41.39387781322016,"lng":2.154167890548706},"sns":0,"ang":135},
{"llg":{"lat":41.393781230227106,"lng":2.1542805433273315},"sns":1,"ang":135},
{"llg":{"lat":41.39370476858917,"lng":2.1544253826141357},"sns":0,"ang":135},
{"llg":{"lat":41.393584039504034,"lng":2.1546131372451782},"sns":1,"ang":135},
{"llg":{"lat":41.393435139990224,"lng":2.1548062562942505},"sns":0,"ang":135},
{"llg":{"lat":41.39349952901104,"lng":2.1549779176712036},"sns":0,"ang":135},
{"llg":{"lat":41.3936041610338,"lng":2.1548062562942505},"sns":0,"ang":135},
{"llg":{"lat":41.393769157342874,"lng":2.15457022190094},"sns":1,"ang":135},
{"llg":{"lat":41.39390195894599,"lng":2.1543878316879272},"sns":2,"ang":135},
{"llg":{"lat":41.39406695449921,"lng":2.1542376279830933},"sns":2,"ang":135},
{"llg":{"lat":41.3948194898819,"lng":2.1551871299743652},"sns":2,"ang":135},
{"llg":{"lat":41.394739005230285,"lng":2.1553266048431396},"sns":1,"ang":135},
{"llg":{"lat":41.39468669015332,"lng":2.1554285287857056},"sns":2,"ang":135},
{"llg":{"lat":41.39456193864597,"lng":2.15556800365448},"sns":0,"ang":135},
{"llg":{"lat":41.39446133241728,"lng":2.155712842941284},"sns":0,"ang":135},
{"llg":{"lat":41.394320483435486,"lng":2.155863046646118},"sns":2,"ang":135},
{"llg":{"lat":41.394231949633586,"lng":2.155964970588684},"sns":0,"ang":135},
{"llg":{"lat":41.393994517478625,"lng":2.156367301940918},"sns":0,"ang":135},
{"llg":{"lat":41.39389793465898,"lng":2.156469225883484},"sns":2,"ang":135},
{"llg":{"lat":41.39382549745006,"lng":2.1565765142440796},"sns":0,"ang":135},
{"llg":{"lat":41.39372489008155,"lng":2.1567320823669434},"sns":0,"ang":135},
{"llg":{"lat":41.393608185339,"lng":2.156866192817688},"sns":2,"ang":135},
{"llg":{"lat":41.39345123725142,"lng":2.15706467628479},"sns":1,"ang":135},
{"llg":{"lat":41.39312929127047,"lng":2.1574723720550537},"sns":2,"ang":135},
{"llg":{"lat":41.393024658483334,"lng":2.1576011180877686},"sns":2,"ang":135},
{"llg":{"lat":41.392916001179984,"lng":2.15781033039093},"sns":0,"ang":135},
{"llg":{"lat":41.39270673475069,"lng":2.158035635948181},"sns":0,"ang":135},
{"llg":{"lat":41.392618198750895,"lng":2.1581214666366577},"sns":2,"ang":135},
{"llg":{"lat":41.392509540768124,"lng":2.1582716703414917},"sns":0,"ang":135},
{"llg":{"lat":41.392573930705765,"lng":2.158459424972534},"sns":2,"ang":135},
{"llg":{"lat":41.39272685655202,"lng":2.1582287549972534},"sns":2,"ang":135},
{"llg":{"lat":41.39294417160941,"lng":2.157944440841675},"sns":2,"ang":135},
{"llg":{"lat":41.393093072247815,"lng":2.157767415046692},"sns":2,"ang":135},
{"llg":{"lat":41.39323392388916,"lng":2.1575796604156494},"sns":1,"ang":135},
{"llg":{"lat":41.39240893136292,"lng":2.1586525440216064},"sns":1,"ang":135},
{"llg":{"lat":41.39228417548417,"lng":2.1588456630706787},"sns":2,"ang":135},
{"llg":{"lat":41.392151370575995,"lng":2.15906023979187},"sns":2,"ang":135},
{"llg":{"lat":41.392014540992854,"lng":2.1591997146606445},"sns":0,"ang":135},
{"llg":{"lat":41.39188173553385,"lng":2.1594250202178955},"sns":1,"ang":135},
{"llg":{"lat":41.39174088096264,"lng":2.1595269441604614},"sns":2,"ang":135},
{"llg":{"lat":41.3916603924992,"lng":2.1594303846359253},"sns":1,"ang":135},
{"llg":{"lat":41.3918495402302,"lng":2.1591997146606445},"sns":1,"ang":135},
{"llg":{"lat":41.39197832134916,"lng":2.158985137939453},"sns":1,"ang":135},
{"llg":{"lat":41.392151370575995,"lng":2.158765196800232},"sns":0,"ang":135},
{"llg":{"lat":41.39228417548417,"lng":2.1585559844970703},"sns":0,"ang":135},
{"llg":{"lat":41.391451122027895,"lng":2.159687876701355},"sns":1,"ang":135},
{"llg":{"lat":41.391322339864566,"lng":2.1598273515701294},"sns":2,"ang":135},
{"llg":{"lat":41.39120160635475,"lng":2.1600204706192017},"sns":0,"ang":135},
{"llg":{"lat":41.39107684815905,"lng":2.1601974964141846},"sns":0,"ang":135},
{"llg":{"lat":41.39094806525427,"lng":2.1603745222091675},"sns":2,"ang":135},
{"llg":{"lat":41.390795135223534,"lng":2.1606051921844482},"sns":1,"ang":135},
{"llg":{"lat":41.39087160028387,"lng":2.160766124725342},"sns":0,"ang":135},
{"llg":{"lat":41.391008432272656,"lng":2.160513997077942},"sns":2,"ang":135},
{"llg":{"lat":41.39112916614122,"lng":2.1603530645370483},"sns":0,"ang":135},
{"llg":{"lat":41.39133441320321,"lng":2.160117030143738},"sns":2,"ang":135},
{"llg":{"lat":41.39148331752887,"lng":2.159907817840576},"sns":2,"ang":135},
{"llg":{"lat":41.39159197722693,"lng":2.1597522497177124},"sns":1,"ang":135},
{"llg":{"lat":41.38980510579528,"lng":2.157585024833679},"sns":2,"ang":135},
{"llg":{"lat":41.38963205032283,"lng":2.157837152481079},"sns":2,"ang":135},
{"llg":{"lat":41.38948716631722,"lng":2.157965898513794},"sns":0,"ang":135},
{"llg":{"lat":41.38929801171281,"lng":2.1582287549972534},"sns":0,"ang":135},
{"llg":{"lat":41.38918934818055,"lng":2.1584218740463257},"sns":2,"ang":135},
{"llg":{"lat":41.38904446318836,"lng":2.1583253145217896},"sns":1,"ang":135},
{"llg":{"lat":41.38928593799598,"lng":2.1579980850219727},"sns":1,"ang":135},
{"llg":{"lat":41.38945496982766,"lng":2.15781033039093},"sns":0,"ang":135},
{"llg":{"lat":41.389680344919604,"lng":2.157493829727173},"sns":2,"ang":135},
{"llg":{"lat":41.390626106876226,"lng":2.154216170310974},"sns":1,"ang":135},
{"llg":{"lat":41.39051342106724,"lng":2.1543771028518677},"sns":2,"ang":135},
{"llg":{"lat":41.390340367480235,"lng":2.1545755863189697},"sns":1,"ang":135},
{"llg":{"lat":41.39017536246828,"lng":2.1548008918762207},"sns":2,"ang":135},
{"llg":{"lat":41.39010292111123,"lng":2.1546614170074463},"sns":1,"ang":135},
{"llg":{"lat":41.39029207337375,"lng":2.1544253826141357},"sns":2,"ang":135},
{"llg":{"lat":41.39044902908868,"lng":2.1542268991470337},"sns":0,"ang":135},
{"llg":{"lat":41.3897004676577,"lng":2.1551871299743652},"sns":2,"ang":135},
{"llg":{"lat":41.38944289613996,"lng":2.1555519104003906},"sns":1,"ang":135},
{"llg":{"lat":41.38929801171281,"lng":2.1557825803756714},"sns":2,"ang":135},
{"llg":{"lat":41.38926983970336,"lng":2.1560078859329224},"sns":2,"ang":135},
{"llg":{"lat":41.389422773322174,"lng":2.1557611227035522},"sns":0,"ang":135},
{"llg":{"lat":41.38957973113582,"lng":2.15556800365448},"sns":2,"ang":135},
{"llg":{"lat":41.389764860377674,"lng":2.155342698097229},"sns":0,"ang":135},
{"llg":{"lat":41.39050939657043,"lng":2.1566033363342285},"sns":0,"ang":135},
{"llg":{"lat":41.39039268605512,"lng":2.156769633293152},"sns":2,"ang":135},
{"llg":{"lat":41.39023975471789,"lng":2.156962752342224},"sns":1,"ang":135},
{"llg":{"lat":41.3900827984977,"lng":2.1572095155715942},"sns":2,"ang":135},
{"llg":{"lat":41.38828381168208,"lng":2.1573811769485474},"sns":0,"ang":45},
{"llg":{"lat":41.388424673743565,"lng":2.15756356716156},"sns":1,"ang":45},
{"llg":{"lat":41.38855346164697,"lng":2.157767415046692},"sns":1,"ang":45},
{"llg":{"lat":41.38871847077539,"lng":2.1579819917678833},"sns":2,"ang":45},
{"llg":{"lat":41.38884725809681,"lng":2.1581536531448364},"sns":2,"ang":45},
{"llg":{"lat":41.38887543028936,"lng":2.1583789587020874},"sns":2,"ang":45},
{"llg":{"lat":41.38878688907165,"lng":2.158266305923462},"sns":1,"ang":45},
{"llg":{"lat":41.38867420007472,"lng":2.1580785512924194},"sns":0,"ang":45},
{"llg":{"lat":41.38848906772717,"lng":2.1578747034072876},"sns":1,"ang":45},
{"llg":{"lat":41.38836430432602,"lng":2.1576708555221558},"sns":2,"ang":45},
{"llg":{"lat":41.38820734357808,"lng":2.1574991941452026},"sns":2,"ang":45},
{"llg":{"lat":41.38918129902279,"lng":2.1585452556610107},"sns":1,"ang":45},
{"llg":{"lat":41.38929398714077,"lng":2.1587544679641724},"sns":1,"ang":45},
{"llg":{"lat":41.38948314175687,"lng":2.1590065956115723},"sns":0,"ang":45},
{"llg":{"lat":41.38962802577147,"lng":2.1591782569885254},"sns":2,"ang":45},
{"llg":{"lat":41.38981315487581,"lng":2.159435749053955},"sns":2,"ang":45},
{"llg":{"lat":41.389724614935155,"lng":2.15956449508667},"sns":1,"ang":45},
{"llg":{"lat":41.38959582935169,"lng":2.1593552827835083},"sns":0,"ang":45},
{"llg":{"lat":41.389422773322174,"lng":2.1590763330459595},"sns":1,"ang":45},
{"llg":{"lat":41.389314109998445,"lng":2.1589314937591553},"sns":1,"ang":45},
{"llg":{"lat":41.38918934818055,"lng":2.158765196800232},"sns":1,"ang":45},
{"llg":{"lat":41.38906458612324,"lng":2.1586203575134277},"sns":1,"ang":45},
{"llg":{"lat":41.38995803815496,"lng":2.159634232521057},"sns":0,"ang":45},
{"llg":{"lat":41.39016328891439,"lng":2.1598970890045166},"sns":0,"ang":45},
{"llg":{"lat":41.390356465507764,"lng":2.160181403160095},"sns":2,"ang":45},
{"llg":{"lat":41.39057378848923,"lng":2.1604281663894653},"sns":0,"ang":45},
{"llg":{"lat":41.39058988645894,"lng":2.1606749296188354},"sns":1,"ang":45},
{"llg":{"lat":41.39046110258952,"lng":2.160460352897644},"sns":0,"ang":45},
{"llg":{"lat":41.390308171413245,"lng":2.1602511405944824},"sns":0,"ang":45},
{"llg":{"lat":41.390179386985736,"lng":2.1600955724716187},"sns":0,"ang":45},
{"llg":{"lat":41.390010357037525,"lng":2.159864902496338},"sns":0,"ang":45},
{"llg":{"lat":41.38989767016122,"lng":2.1597254276275635},"sns":0,"ang":45}];

function parkedV(llg, sns, ang){
  this.llg = llg;
  this.sns = sns;
  this.ang = ang;
}

var symbol1 = {
  path: 'M -3,6 3,6 3,-6 -3,-6 z',
  strokeColor: '#F00',
  fillColor: '#F00',
  fillOpacity: 1,
  rotation: 0
};

var symbol2 = {
  path: 'M -3,6 3,6 3,-6 -3,-6 z',
  strokeColor: '#ffee00',
  fillColor: '#ffee00',
  fillOpacity: 1,
  rotation: 0
};

var symbol3 = {
  path: 'M -3,6 3,6 3,-6 -3,-6 z',
  strokeColor: '#0dac31',
  fillColor: '#0dac31',
  fillOpacity: 1,
  rotation: 0
};

var symbols = [symbol1, symbol2, symbol3];


function initAutocomplete() {
  var map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 41.3851, lng: 2.1734},
    zoom: 14,
    mapTypeId: 'roadmap',
    styles: [
      {
        featureType: "poi",
        stylers: [
          {visibility: "off"}
        ]
      }
    ],
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
      position: google.maps.ControlPosition.TOP_LEFT
    },
    zoomControl: true,
    zoomControlOptions: {
      position: google.maps.ControlPosition.LEFT_CENTER
    },
  });


  //Car Part done by Adam
  //code for creation and movement of cars

  var cars = [];

  var directionsService = new google.maps.DirectionsService();

  //Places a car at position
  function placeCar(position) {
    var car = new google.maps.Marker({
      position: position,
      icon: './images/caricon.png',
      clickable: false,
      map: map
    });
    car.path = [];
    car.startPosition = car.position;
    car.waypoints = [];
    car.totalDistance = 0;
    car.pointOnPath = 0;
    cars.push(car);

  }

  //Returns a random point within the area defined bottomLeft and topRight
  function randomPoint(bottomLeft, topRight) {
    var latDiff = topRight.lat() - bottomLeft.lat();
    var lngDiff = topRight.lng() - bottomLeft.lng();
    var newLat = bottomLeft.lat() + Math.random() * latDiff;
    var newLng = bottomLeft.lng() + Math.random() * lngDiff;
    return new google.maps.LatLng(newLat, newLng);
  }

  //Place cars at random position in latlng range and drive them to location
  var car_number = 1;
  //this is our box we get data from - cars will be rendered inside and will also drive inside
  var limiting_coordinates = [new google.maps.LatLng(41.391603, 2.145333), new google.maps.LatLng(41.387482, 2.157242)]
  for (var i = 0; i < car_number; i++) {
    var rPoint = randomPoint(limiting_coordinates[0], limiting_coordinates[1]);
    directionsService.route({
      origin: rPoint,
      destination: randomPoint(limiting_coordinates[0], limiting_coordinates[1]),
      travelMode: google.maps.TravelMode.DRIVING
    }, function (result, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        placeCar(new google.maps.LatLng(result.routes[0].legs[0].start_location.lat(), result.routes[0].legs[0].start_location.lng()));
      } else {
        alert("Error: Google Maps API not returning location data. The app will restart.");
        window.location = "./";
      }
    });
  }

  //Relocates car to position
  function moveCar(car, position) {
    car.setPosition(position);
  }

  //Moves a car along its path at the correct speed
  function advance(car) {
    if (car.pointOnPath < car.path.length) {
      if (car.midpoint) {
        if (car.pointOnPath < (car.path.length - 1)) {
          moveCar(car, new google.maps.LatLng(
            (car.path[car.pointOnPath].lat() + car.path[(car.pointOnPath + 1)].lat()) / 2,
            (car.path[car.pointOnPath].lng() + car.path[(car.pointOnPath + 1)].lng()) / 2
          ));
        }
        car.midpoint = false;
        car.pointOnPath++;
      } else {
        car.midpoint = true;
        moveCar(car, car.path[car.pointOnPath]);
      }

    } else {
      car.midpoint = false;

      car.target = randomPoint(limiting_coordinates[0], limiting_coordinates[1]);
      directionsService.route({
          origin: car.getPosition(),
          destination: car.target,
          travelMode: google.maps.TravelMode.DRIVING
        }, function (result, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            car.path = result.routes[0].overview_path;
            car.pointOnPath = 0;
          }
        }
      );
    }
  }

  setTimeout(function () {
    timer = setInterval(function () {
      for (var f = 0; f < car_number; f++) {
        advance(cars[f]);
      }
    }, 1500);
  }, 2000);

  //Car Part done by Adam

  function CenterControl(controlDiv, map) {
    // Set CSS for the button border.
    var controlUI = document.createElement('div');
    controlUI.style.backgroundColor = '#fff';
    controlUI.style.border = '2px solid #fff';
    controlUI.style.borderRadius = '3px';
    controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
    controlUI.style.cursor = 'pointer';
    controlUI.style.marginBottom = '16px';
    controlUI.style.textAlign = 'center';
    controlUI.style.marginTop = '10px';
    controlUI.title = 'Click to set the destination';
    controlDiv.appendChild(controlUI);

    // Set CSS for the button interior.
    var controlText = document.createElement('div');
    controlText.style.color = 'rgb(25,25,25)';
    controlText.style.fontFamily = 'Comfortaa';
    controlText.style.fontSize = '16px';
    controlText.style.lineHeight = '28px';
    controlText.style.paddingLeft = '5px';
    controlText.style.paddingRight = '5px';
    controlText.innerHTML = 'SUBMIT';
    controlUI.appendChild(controlText);

    // Setup the click event listeners: simply set the map to Chicago.
    controlUI.addEventListener('click', function () {

    });
  }

    var input = document.getElementById('pac-input');
    var searchBox = new google.maps.places.SearchBox(input);
    map.controls[google.maps.ControlPosition.TOP_LEFT].push(input); //comment this out to move the search box anywhere
    var centerControlDiv = document.createElement('div');
    var centerControl = new CenterControl(centerControlDiv, map);
    map.controls[google.maps.ControlPosition.TOP_CENTER].push(centerControlDiv);

    map.addListener('bounds_changed', function () {
      searchBox.setBounds(map.getBounds());
    });


    var markers = [];
    searchBox.addListener('places_changed', function () {

      clearLocations();
      var places = searchBox.getPlaces();


      if (places.length == 0) {
        return;
      }

      // Clear out the old markers.

      clearLocations();

      markers = [];

      // For each place, get the icon, name and location.
      var bounds = new google.maps.LatLngBounds();
      places.forEach(function (place) {
        if (!place.geometry) {
          console.log("Returned place contains no geometry");
          return;
        }
        var icon = {
          url: place.icon,
          size: new google.maps.Size(71, 71),
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(17, 34),
          scaledSize: new google.maps.Size(25, 25)
        };

        // Create a marker for each place.
        markers.push(new google.maps.Marker({
          map: map,
          icon: icon,
          title: place.name,
          position: place.geometry.location

        }));

        window.alert(markers[0].position);


        if (place.geometry.viewport) {
          // Only geocodes have viewport.
          bounds.union(place.geometry.viewport);
        } else {
          bounds.extend(place.geometry.location);
        }
      });
      map.fitBounds(bounds);
    });

    map.addListener('click', function (event) {
      clearLocations();

      placeMarker(event.latLng);

    });

    function placeMarker(location) {
      markers.push(new google.maps.Marker({
        position: location,
        map: map,
      }));
      console.log("lat:" + Number(location.lat()) + ",lng:" + Number(location.lng()));
    }

    function clearLocations() { //Clears out all marker data from array 'markers'
      info_Window = new google.maps.InfoWindow();
      info_Window.close();
      for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
      }
      markers.length = 0;
    }

    function clearMarks(carMarkers) { //Clears out all marker data from array 'pCarMarkers'
      info_Window = new google.maps.InfoWindow();
      info_Window.close();
      for (var i = 0; i < carMarkers.length; i++) {
        carMarkers[i].setMap(null);
      }
      carMarkers.length = 0;
    }


    var sdQueryRes = []; //equate it to result of circle query
    var mcQueryRes = []; //equate it to result of circle query
    var sdCarMarkers = []; //for static destination coordinate query
    var mCarMarkers = [];
    var sdCars = [];
    var mCars = []; //for moving car coordinate query

    //converting coordinates to distance in meters
    function toRad(n) {
     return n * Math.PI / 180;
    };
    function distVincenty(lat1, lon1, lat2, lon2) {
     var a = 6378137,
         b = 6356752.3142,
         f = 1 / 298.257223563, // WGS-84 ellipsoid params
         L = toRad(lon2-lon1),
         U1 = Math.atan((1 - f) * Math.tan(toRad(lat1))),
         U2 = Math.atan((1 - f) * Math.tan(toRad(lat2))),
         sinU1 = Math.sin(U1),
         cosU1 = Math.cos(U1),
         sinU2 = Math.sin(U2),
         cosU2 = Math.cos(U2),
         lambda = L,
         lambdaP,
         iterLimit = 100;
     do {
      var sinLambda = Math.sin(lambda),
          cosLambda = Math.cos(lambda),
          sinSigma = Math.sqrt((cosU2 * sinLambda) * (cosU2 * sinLambda) + (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda) * (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda));
      if (0 === sinSigma) {
       return 0; // co-incident points
      };
      var cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda,
          sigma = Math.atan2(sinSigma, cosSigma),
          sinAlpha = cosU1 * cosU2 * sinLambda / sinSigma,
          cosSqAlpha = 1 - sinAlpha * sinAlpha,
          cos2SigmaM = cosSigma - 2 * sinU1 * sinU2 / cosSqAlpha,
          C = f / 16 * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));
      if (isNaN(cos2SigmaM)) {
       cos2SigmaM = 0; // equatorial line: cosSqAlpha = 0 (§6)
      };
      lambdaP = lambda;
      lambda = L + (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));
     } while (Math.abs(lambda - lambdaP) > 1e-12 && --iterLimit > 0);

     if (!iterLimit) {
      return NaN; // formula failed to converge
     };

     var uSq = cosSqAlpha * (a * a - b * b) / (b * b),
         A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq))),
         B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq))),
         deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) - B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM))),
         s = b * A * (sigma - deltaSigma);
     return s.toFixed(3); // round to 1mm precision
    };

    function circleQuery(center, radius){
      var arrayLength = points.length;
      var nearby = [];
      for (var i = 0; i < arrayLength; i++) {
        if (distVincenty(center.lat(), center.lng(), points[i].llg["lat"], points[i].llg["lng"]) < radius){
          nearby.push(points[i]);
        }
      }
      return nearby;
    }

    timerDyna = setInterval(function(){
      clearMarks(mCarMarkers);
      mcQueryRes = circleQuery(cars[0].position, 50);
      pushCars(mcQueryRes, mCars);
      drawCars(mCarMarkers, mCars);
    }, 3000);


    timerStat = setInterval(function(){
      clearMarks(sdCarMarkers);
      if(markers.length > 0){
        console.log("there are some markers");
        sdQueryRes = circleQuery(markers[0].position, 200);
        pushCars(sdQueryRes, sdCars);
        drawCars(sdCarMarkers, sdCars);
      }
    }, 10000);

    /* Example of pushing query result into an array of parkedV objects
    var parkedCars = [];
    for(var i = 0; i<449;i++){
      parkedCars.push(new parkedV(cvarr[i].llg,cvarr[i].sns,cvarr[i].ang));
    }
    */


    ///////////////////////////////////////////////////////////////////////////////

    function drawCars(parkedCarMarkers, carArray) {
      for (var i = 0; i < carArray.length; i++) {
        var iconu = symbols[carArray[i].sns];
        iconu.rotation = carArray[i].ang;

        parkedCarMarkers.push(new google.maps.Marker({
          position: carArray[i].llg,
          map: map,
          icon: iconu
        }));

        console.log("Pushed");
      }
    }

    function pushCars(queryRes, carMarkers) {
      for (var i = 0; i < queryRes.length; i++) {
        carMarkers.push(new parkedV(queryRes[i].llg, queryRes[i].sns, queryRes[i].ang));
      }
    }


}
